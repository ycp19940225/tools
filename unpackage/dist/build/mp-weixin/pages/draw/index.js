(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/draw/index"],{"29e0":function(t,e,o){"use strict";o.r(e);var n=o("e5d6"),a=o("c816");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);o("da35");var d,r=o("f0c5"),c=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"50a375d4",null,!1,n["a"],d);e["default"]=c.exports},"3d5d":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;o("591d");var n=function(){return Promise.all([o.e("common/vendor"),o.e("components/SJ-LotteryDraw/SJ-LotteryDraw")]).then(o.bind(null,"f420"))},a=function(){return o.e("components/uni-notice-bar/uni-notice-bar").then(o.bind(null,"3aa2"))},i=function(){return Promise.all([o.e("common/vendor"),o.e("components/gaoyia-parse/parse")]).then(o.bind(null,"0c66"))},d={components:{LotteryDraw:n,uniNoticeBar:a,uParse:i},props:{},data:function(){return{lottery_draw_param:{startIndex:0,totalCount:4,winingIndex:4,speed:100},drawList:{},back_time:0,open:!1,open2:!1,packageId:null,rule:{},showAdContent:{},name:"规则",videoAd2:null,screenAd:null,getPrizeRecordId:"",ad_time:0,isGetAdTime:!1,sign:"人工客服在线时间：08:00-24:00 发货时间5个工作日内",setInter:""}},onLoad:function(t){var e=this;e.shareCode=void 0!=t.shareCode?t.shareCode:""},mounted:function(){var t=this,e=getCurrentPages(),o=e[e.length-1],n=o.options;console.log(n),t.shareCode=void 0!=n.scene?n.scene:"",console.log(t.shareCode),t.$tool.showLoading("页面加载中..."),t.getPageData(),t.getAd()},beforeDestroy:function(){},onHide:function(){},methods:{addDrawTime:function(){var e=this,o={};e.$http.post("/api/draw/addDrawTime",o).then(function(o){var n=o.data.data;1!=o.data.code?t.showToast({title:o.data.info,icon:"none"}):(e.packageId=null,t.showToast({title:"领取成功！"}),e.back_time=n,e.ad_time--)}).catch(function(t){console.log(t)})},getPrize:function(){var e=this,o={getPrizeRecordId:e.getPrizeRecordId};console.log(e.getPrizeRecordId),e.$http.post("/api/draw/getPrize",o).then(function(o){var n=o.data.data;if(console.log(e.getPrizeRecordId,n),1!=o.data.code)t.showToast({title:o.data.info,icon:"none"});else if(e.packageId=null,console.log(n),1==n.draw_type)t.showModal({title:"宝箱领取成功!\n下次抽奖将会得到"+n.value+"倍奖励"});else if(2==n.draw_type){var a={};a.goods_id=n.goods_id,t.showToast({title:"奖品领取成功！"}),setTimeout(function(){t.redirectTo({url:"/pages/order/createOrder3?data="+JSON.stringify(a)})},1e3)}}).catch(function(t){console.log(t)})},endSetInter:function(){var t=this;clearInterval(t.setInter),console.log("close interval")},random:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getSign:function(){var t=this,e=t.random(0,t.nick.length),o=t.random(0,t.goods.length),n=void 0!=t.nick[e]?t.nick[e]:"Everglow",a=void 0!=t.goods[o]?t.goods[o]:"新鲜柠檬";t.sign="恭喜"+n+"兑换了"+a+"!"},getAd:function(){var t=this;wx.createInterstitialAd&&(t.screenAd=wx.createInterstitialAd({adUnitId:"adunit-2ee08fdeaba9cd00"}),t.screenAd.onLoad(function(){}),t.screenAd.onError(function(t){})),t.screenAd&&setTimeout(function(){t.screenAd.show().catch(function(t){console.log(t)})},t.getRandom(15e3,3e4))},getRandom:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e-t,a=Math.random();return(t+n*a).toFixed(o)},navTo:function(){var e="/pages/user/sign";t.navigateTo({url:e})},hideModal2:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=this;this.packageId=null;1==t&&(e.isGetAdTime=!1,e.$emit("videoShow",!1)),2==t&&(e.isGetAdTime=!1,e.$emit("videoShow",!1))},showAd:function(){var e=this;e.$tool.showLoading("加载中..."),e.ad_time>0?(e.isGetAdTime=!0,e.$emit("videoShow",!0)):(t.showModal({title:"广告次数已用完！"}),e.$tool.hideLoading())},showModal:function(){this.open=!0},hideModal:function(t){this.open=!1},showModal2:function(){1==getApp().globalData.showAd&&(console.log(333),this.open2=!0,getApp().globalData.showAd=0)},hideModal3:function(t){this.open2=!1},getPageData:function(){var e=this;e.$http.post("/api/draw/getDrawList",{shareCode:e.shareCode}).then(function(o){var n=o.data.data;1!=o.data.code?t.showToast({title:o.data.info,icon:"none"}):(console.log(n),e.drawList=n.drawList,e.back_time=n.back_time,e.rule=n.rule,e.name=n.rule.name,console.log(e.rule),e.showAdContent=n.showAd,e.ad_time=n.ad_time,e.nick=n.nick,e.goods=n.goods,e.$tool.hideLoading(),e.showModal2())}).catch(function(t){console.log(t)})},get_winingIndex:function(e){var o=this,n=this;0==n.back_time||n.back_time<0?t.showModal({title:"今日抽奖次数已用完"}):(n.$tool.showLoading("抽奖中..."),this.$http.post("/api/draw/doDraw").then(function(a){var i=a.data.data;if(1!=a.data.code)t.showToast({title:a.data.info,icon:"none"});else{var d,r,c=i.checkList;console.log(i);for(var s=0;s<n.drawList.length;s++)n.drawList[s].id==c.id&&(d=s,r=n.drawList[s].type,n.getPrizeRecordId=i.getRecordId,n.$set(n.drawList,s,c));o.lottery_draw_param.winingIndex=d,o.lottery_draw_param.speed=100,e(o.lottery_draw_param),0==r&&n.back_time--}}).catch(function(t){console.log(t)}))},luck_draw_finish:function(t){console.log(t);for(var e=this,o=0,n=0;n<e.drawList.length;n++)e.drawList[n].id==t.id&&(o=n);this.packageId=o}}};e.default=d}).call(this,o("543d")["default"])},a98a:function(t,e,o){},c816:function(t,e,o){"use strict";o.r(e);var n=o("3d5d"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,function(){return n[t]})}(i);e["default"]=a.a},da35:function(t,e,o){"use strict";var n=o("a98a"),a=o.n(n);a.a},e5d6:function(t,e,o){"use strict";var n={"uni-notice-bar":()=>o.e("components/uni-notice-bar/uni-notice-bar").then(o.bind(null,"3aa2"))},a=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"b",function(){return a}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return n})},f990:function(t,e,o){"use strict";(function(t){o("4520"),o("921b");n(o("66fd"));var e=n(o("29e0"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])}},[["f990","common/runtime","common/vendor"]]]);